language: ruby
dist: trusty
sudo: required
rvm:
- 2.4.1
#- 2.3.1
jdk:
  - openjdk8
#  - oraclejdk8

before_install:
  - gem install bundler
  - wget http://repo1.maven.org/maven2/net/sourceforge/plantuml/plantuml/1.2017.15/plantuml-1.2017.15.jar -O /tmp/plantuml.jar
  - echo "#!/bin/bash" > /tmp/plantuml
  - echo "java -jar /tmp/plantuml.jar \"\$1\" \"\$2\"" >> /tmp/plantuml
  - sudo mv /tmp/plantuml  /usr/bin/plantuml
  - sudo chmod u+x /usr/bin/plantuml
  - cat /usr/bin/plantuml
  - sudo apt-get -qq update
  - sudo apt-get install -y ditaa graphviz

  






install:
  - bundle install

script:
  - sudo /usr/bin/plantuml -v
  - bundle exec rake build
  - bundle exec rake html_proofer
